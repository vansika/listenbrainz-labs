<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Candidate Set</title>
<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
</style>
</head>
<body>
	<center>
		<h1>Data Preprocessing to generate recommendations</h1>
	</center>
	<p>The following table gives information about total time taken to generate three candidate sets for user: </p>
	<table>
		<tr>
			<th>user name</th>
			<th>time(s)</th>
		</tr>
		{% for user_name, artists in user_data.items() -%}
		<tr>
			<td>{{ user_name }}</td>
			<td>{{ artists['total_time'] }}</td>
		</tr>
		{% endfor -%}
	</table>
	<p>To get personalized recommendations for users, <b>3</b> candidate sets are generated for each user consisting of recording ids and the user id using the underlying procedure.</p>
	<h3>Candidate Set 1: Top artists</h3>
	<p>The candidate set consists of tracks of top 20 artists that a user has listened to for each user. Time taken to generate candidate set 1:</p>
	<table>
		<tr>
			<th>user name</th>
			<th>time(s)</th>
		</tr>
		{% for user_name, artists in user_data.items() -%}
		<tr>
			<td>{{ user_name }}</td>
			<td>{{ artists['top_artists_time'] }}</td>
		</tr>
		{% endfor -%}
	</table>
	<h3>Candidate Set 2: Similar Artists</h3>
	<p>The candidate set consists of tracks of artists similar to the top 20 artists obtained whilst processing candidate set 1. Time taken to generate candidate set 2:</p>
	<table>
		<tr>
			<th>user name</th>
			<th>similar artists count</th>
			<th>time(s)</th>
		</tr>
		{% for user_name, artists in user_data.items() -%}
		<tr>
			<td>{{ user_name }}</th>
			<td>{{ artists['similar_artists_count'] }}</td>
			<td>{{ artists['similar_artists_time'] }}</td>
		</tr>
		{% endfor -%}
	</table>
	{% for user_name, artists in user_data.items() -%}
	<p>Similar artists set for <b>{{ user_name }}</b></p>
		<table>
			<tr>
				<th>Top Artist</th>
				{% for i in range(5) -%}
				<th>Similar artist</th>
				{% endfor -%}
				<th>Total similar artists</th>
			</tr>
			{% for top_artist, similar_artist in artists['similar_artists'].items() -%}
			<tr>
				<td>{{ top_artist }}</td>
				{% for name in similar_artist['names'] -%}
				<td>{{ name }}</td>
				{% endfor -%}
				<td>{{ similar_artist['count'] }}</td>
			</tr>
			{% endfor -%}
		</table>
	{% endfor -%}
	<h3>Candidate Set 3: New Artists</h3>
	<p>The candidate set consists of tracks of artists which have not been included in the above two sets. Time taken to generate candidate set:</p>
	<table>
		<tr>
			<th>user name</th>
			<th>new artists count</th>
			<th>time(s)</th>
		</tr>
		{% for user_name, artists in user_data.items() -%}
		<tr>
			<td>{{ user_name }}</td>
			<td>{{ artists['new_artists_count'] }}</td>
			<td>{{ artists['new_artists_time'] }}</td>
		</tr>
		{% endfor -%}
	</table>
</body>
</html>